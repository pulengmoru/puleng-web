function getPreviewThumbUrl(){return(__isLogoMaker||logo_updatedAt?self.api.logomakerpreview+self.logo_png_id+"_200x200.png":self.api.preview+self.logo_png_id+".png")+"?"+Date.now()}function fetchLogo(n,t){$.ajax({type:"post",url:self.api.logo+"get",data:JSON.stringify({guid:n,type:t}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(t){var u,i,r;if(t.status==1){if(self.paid_plan=t.obj.paid_item_number,self.payment_status=t.obj.payment_status,t.obj.engine==1){self.dom.find(".edit-buttom").on("click",function(){window.location=self.api.logomakerurl+"/editor/logo/"+n+"?lang="+self.api.language});self.setActions()}else{u=function(n){self.svg=n;self.setActions()};self.dom.find(".edit-buttom").on("click",function(){window.location=self.api.editorPage+"?lang="+self.api.language+"&logo="+n});self.SvgTools.getthumb(t.obj,!1,!1,u,!0);i=t.obj.dominant_color;r=i.replace("1)","0.3)");self.dom.find(".customcolor").css("color",i);self.dom.find(".custombg").css("background-color",i);self.dom.find(".monitor-header, .monitor-menu, .monitor-body, .monitor-footer").css("border-right","1px solid "+r);self.dom.find(".monitor-header, .monitor-menu, .monitor-body, .monitor-footer").css("border-left","1px solid "+r)}$(".example-box").slideDown()}else alert(self.api.dictionary.preview_invalid_url),window.location="https://www.freelogodesign.org/"})}var inputs,_lock;api=new Api;self.dom=$(".previewtab");self.SvgTools=new SvgTools;self.autodownload=getQueryVariable("autodownload");self.api=api;self.loading=$(".master-loading");self.productid=getQueryVariable("productid");self.productid||(self.productid="hires");self.logo=getQueryVariable("logo");self.logo_png_id=window._publicGuid;self.logo_updatedAt=window._updatedAt;typeof fbq!="undefined"&&fbq("track","InitiateCheckout",{logo_id:self.logo});self.bindShareEmail=function(){$(".share-email").on("click",function(){var t,i,n;shareemails=[];getCaptcha=function(){grecaptcha.render("g-recaptcha",{sitekey:"6LeB2zQUAAAAAB3gPmGm8Y-Ywc0ab_J6utBQZt6v"})};addEmailToEmails=function(n){var u=n.shareemailinput.val(),r,i,t;if(u.length>0){for(r=u.split(","),i=0;i<r.length;i++)if(t=$.trim(r[i]),$.inArray(t,shareemails)==-1&&validateEmail(t)){if(n.shareemaillist.prepend('<span class="share-email-wrapper"><span class="email">'+t+'<\/span><span class="share-email-remove">+<\/span><\/span>'),shareemails.push(t),updateemaillist(),shareemails.length>4){n.shareemailinput.attr("disabled","disabled");n.shareemailinput.attr("placeholder","Max : 5 emails");break}}else n.shareemailinput.addClass("invalid");n.shareemailinput.val("")}else n.shareemailinput.addClass("invalid")};updateemaillist=function(){shareemailclose=$(".share-email-remove");shareemailclose.on("click",function(){var t=$(this).parent(".share-email-wrapper"),r=t.find(".email").text(),i=shareemails.indexOf(r);i>-1&&shareemails.splice(i,1);t.remove();n.shareemailinput.prop("disabled",!1);n.shareemailinput.attr("placeholder",self.api.dictionary.share_email_window_placeholder)})};$(".share-window").parent(".messagewrapper").remove();t='<div class="pure-g padding-bot-20px">';t+='<div class="pure-u-1 message-detail">'+self.api.dictionary.share_email_window_text+"<\/div>";t+='<div class="pure-u-1 share-image-wrapper"><img src="'+getPreviewThumbUrl()+'"><\/div>';t+='<div class="pure-u-1 share-send">';t+='<div class="share-input-wrapper">';t+='<input class="share-email-from" required type="text" placeholder="'+self.api.dictionary.share_email_window_your_name+'" />';t+='<input class="share-email-input" type="email" placeholder="'+self.api.dictionary.share_email_window_placeholder+'" />';t+='<div class="share-add-email"><span>+<\/span> <span>'+self.api.dictionary.share_email_window_add+"<\/span><\/div>";t+="<\/div>";t+='<div class="share-email-list">';t+="<\/div>";t+='<div class="share-email-captcha">';t+='<div class="g-recaptcha" id="g-recaptcha" data-sitekey="6LeB2zQUAAAAAB3gPmGm8Y-Ywc0ab_J6utBQZt6v"><\/div>';t+="<\/div>";t+='<div class="share-email-btn-wrapper">';t+='<span class="share-email-btn" lang="start">'+self.api.dictionary.share_email_window_btn+"<\/span>";t+="<\/div>";t+="<\/div>";t+="<\/div>";i=new Messagebox(self,self.api.dictionary.share_email_window_title,null,null,null,null,!0,t,"share-email-window",null,666);i.show();$(document).click(function(t){shareemails.length<1&&n.shareemailfrom.val()==""&&i.isOpen&&($(t.target).closest(".share-email-window").length||$(".share-email-window").is(":visible")&&($(".share-email-window").remove(),$(".overlay").remove(),$(".messagewrapper").remove(),i.isOpen=!1))});n=[];n.shareemailinput=$(".share-email-input");n.shareemailfrom=$(".share-email-from");n.shareemaillist=$(".share-email-list");n.shareemailbtn=$(".share-email-btn");n.shareemailclose=$(".share-email-remove");n.shareaddemail=$(".share-add-email");getCaptcha();grecaptcha.reset();n.shareemailinput.on("focus",function(){$(this).removeClass("invalid")});$(document).ready(function(){n.shareemailinput.keydown(function(t){t.keyCode==13&&shareemails.length<5&&addEmailToEmails(n)})});n.shareaddemail.on("click",function(){addEmailToEmails(n)});n.shareemailbtn.on("click",function(){var u=$("[name=g-recaptcha-response]").val(),t={},i,r;t.guid=self.logo_png_id;t.emails=shareemails;t.language=api.language;t.captcha=u;t.fromclient=n.shareemailfrom.val();i=!0;t.emails.length<1&&(n.shareemailinput.val()!=""?(r=$.trim(n.shareemailinput.val()),validateEmail(r)?shareemails.push(r):i=!1):i=!1);i&&u?$.ajax({type:"post",url:self.api.mail+"share",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(t){var i;self.endloading();t.status==1?($(".share-email-window").parent(".messagewrapper").remove(),i=new Messagebox(self,self.api.dictionary.share_email_window_success,null,null,self.api.dictionary.ok,null,!0,null,"share-email-confirm"),i.show()):($(".share-email-window").parent(".messagewrapper").remove(),i=new Messagebox(self,self.api.dictionary.error_generic,null,null,self.api.dictionary.ok),i.show());shareemails=[];n.shareemailinput.val("");n.shareemailfrom.val("");n.shareemailinput.prop("disabled",!1);n.shareemailinput.attr("placeholder",self.api.dictionary.share_email_window_placeholder)}):i||n.shareemailinput.addClass("invalid")})})};$(function(){self.dom.find("div.preview img").attr("src",getPreviewThumbUrl());self.dom.find("div.share-button").on("click",function(){var t=encodeURI(self.api.protocol+"www."+self.api.base+"/share-preview/"+self.logo_png_id),n,i;api.language.toLowerCase!="en"&&(t=t.replace("www",api.language));n='<div class="pure-g padding-bot-20px padding-top-20px padding-left-20px padding-right-20px">';n+='<div class="pure-u-1-3"><a class="openWindow" href="https://www.facebook.com/sharer/sharer.php?u='+t+'"><img src="Content/img/share-facebook.png" /><span class="share-name">Facebook<\/span><\/a><\/div>';n+='<div class="pure-u-1-3"><a class="openWindow" href=https://twitter.com/home?status='+t+'"><img src="Content/img/share-twitter.png" /><span  class="share-name">Twitter<\/span><\/a><\/div>';n+='<div class="pure-u-1-3"><img class="share-email" src="Content/img/share-email.png"><span  class="share-name"><\/span>Email<\/div>';n+="<\/div>";i=new Messagebox(self,self.api.dictionary.share_email_window_title,null,null,null,null,!0,n,"share-window");i.show();$(".openWindow").click(function(n){return n.preventDefault(),window.open($(this).attr("href"),"ShareWindow","height=450, width=550"),!1});self.bindShareEmail()})});self.companyName=getQueryVariable("name")?decodeURI(getQueryVariable("name")):!1;$("#TemplateContent").append(self.dom);inputs=document.querySelectorAll("input.field");Array.prototype.forEach.call(inputs,function(n){n.addEventListener("focus",function(){n.classList.add("is-focused");$(n).closest("label").removeClass("invalid")});n.addEventListener("blur",function(){n.classList.remove("is-focused")});n.addEventListener("keyup",function(){n.value.length===0?n.classList.add("is-empty"):n.classList.remove("is-empty")})});self.dom.find("svg").hide();self.dom.find(".language").show();(api.language.toLowerCase()=="de"||self.api.language.toLowerCase()=="it"||self.api.language.toLowerCase()=="nl")&&(self.dom.find(".props").show(),self.dom.find(".webselfform").hide());self.autodownload==!1&&(self.dom.find("span[lang='preview_website_title']").html(self.api.dictionary.preview_website_title_first),self.dom.find("span[lang='preview_website_text']").html(self.api.dictionary.preview_website_text_first));self.formatPriceHtml=function(){var n=self.dom.find(".product-price, .addon-price");n.each(function(n,t){var r=$(t),i=r.text().trim();i=i.replace(/([^\d]+)/g,function(n,t){return'<span class="symbol">'+t+"<\/span>"});r.html(i)})};self.formatPriceHtml();fetchLogo(self.logo,window.__isLogoMaker?"logomaker":"default");self.dom.find(".free-popup-wrapper").on("click",function(n){var t=$(this);$(n.target).closest(".free-popup-box").length||t.fadeOut()});self.downloadhiderrors=function(){self.dom.find(".free-popup-wrapper .error").hide();self.dom.find(".free-popup-wrapper .name-field").removeClass("invalid");self.dom.find(".free-popup-wrapper .email-field").removeClass("invalid");self.dom.find(".paid-popup-wrapper .error").hide();self.dom.find(".paid-popup-wrapper .email-field").removeClass("invalid");self.dom.find(".paid-popup-wrapper-ws .error").hide();self.dom.find(".paid-popup-wrapper-ws .email-field").removeClass("invalid")};self.downloadfreenameerror=function(){var n=self.dom.find(".free-popup-wrapper .name-field .error");n.show();self.dom.find(".free-popup-wrapper .name-field").addClass("invalid").on("input",function(){$(this).removeClass("invalid");n.hide()});self.dom.find(".free-popup-wrapper .name-field input").focus()};self.downloadfreemailerror=function(){var n=self.dom.find(".free-popup-wrapper .email-field .error");n.show();self.dom.find(".free-popup-wrapper .email-field").addClass("invalid").on("input",function(){$(this).removeClass("invalid");n.hide()});self.dom.find(".free-popup-wrapper .email-field input").focus()};self.downloadpaidwsemailerror=function(){var n=self.dom.find(".paid-popup-wrapper-ws .email-field .error");n.show();self.dom.find(".paid-popup-wrapper-ws .email-field").addClass("invalid").on("input",function(){$(this).removeClass("invalid");n.hide()});self.dom.find(".paid-popup-wrapper-ws .email-field input").focus()};self.registerFreeEvent=function(){self.dom.find(".free-popup-box input").keyup(function(n){n.keyCode==13&&self.callfreedownload()});self.dom.find(".free-popup-wrapper .confirm").unbind("click").on("click",function(){self.callfreedownload()})};self.registerPaidEvent=function(){self.dom.find(".paid-popup-box input").keyup(function(n){n.keyCode==13&&self.callfreedownload()});self.dom.find(".paid-popup-wrapper-ws .confirm").unbind("click").on("click",function(){self.callpaiddownloadWS()})};self.callfreedownload=function(){self.downloadhiderrors();self.dom.find(".free-popup-wrapper .name-field input").val().trim()!=""?validateEmail(self.dom.find(".free-popup-wrapper .email-field input").val())?self.downloadfree():self.downloadfreemailerror():self.downloadfreenameerror()};self.calladdonswrapper=function(n,t){t=typeof t=="boolean"?t:!0;n.addClass("open"+(t?"":" noanim"));$("html").css("overflow-y","hidden");$("#menu").hide()};self.closeaddonswrapper=function(n){n.removeClass("open noanim");$("#menu").show();$("html").css("overflow-y","auto")};self.updatecontinuebtn=function(n){var t=self.dom.find(".addon.active").length>0;n.toggleClass("active",t)};self.callpaiddownload=function(n){self.downloadpaid(n)};self.callpaiddownloadWS=function(){self.downloadhiderrors();validateEmail(self.dom.find(".paid-popup-wrapper-ws .email-field input").val())?self.downloadpaidWS():self.downloadpaidwsemailerror()};self.startloading=function(){self.loading.fadeIn()};self.endloading=function(){self.loading.hide()};self.startdownload=function(n,t){var r,i;self.startloading();r={guid:self.logo,svg:"",type:window.__isLogoMaker?"logomaker":"default"};self.svg&&(i=self.svg.clone(),i.wrap("<div><\/div>"),i.attr("width",n+"px"),i.attr("height",t+"px"),r.svg=i.parent().html());$.ajax({type:"post",url:self.api.get+"start",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){var i,t;if(self.endloading(),n){function r(){location.assign(self.api.get+"file?id="+encodeURIComponent(n.storagename))}t=new Messagebox(self,self.api.dictionary.preview_download_message,null,null,self.api.dictionary.ok);t.show();i=$(".messagebox .message a");i.attr("href","javascript:void(0);");i.off("click").on("click",function(){r()});r()}else t=new Messagebox(self,self.api.dictionary.error_generic,null,null,self.api.dictionary.ok),t.show()})};self.downloadfree=function(){self.startloading();var n={};n.name=self.dom.find(".free-popup-wrapper .name-field input").val();n.email=self.dom.find(".free-popup-wrapper .email-field input").val();n.guid=self.logo;n.language=api.language;n.os=api.GetOs();n.browser=api.GetBrowserAndVersion();$.ajax({type:"post",url:self.api.mail+"free",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){if(self.endloading(),n.status==1){self.dom.find(".free-popup-box").addClass("confirmTab");self.dom.find(".free-popup-wrapper .downloadForm").hide();self.dom.find(".free-popup-wrapper .facebookLike").show();$(".client-name").text(self.dom.find(".free-popup-wrapper .name-field input").val());self.dom.find(".free-popup-wrapper .confirm").unbind("click").on("click",function(){self.dom.find(".free-popup-wrapper").fadeOut(function(){self.dom.find(".free-popup-wrapper .downloadForm").show();self.dom.find(".free-popup-wrapper .facebookLike").hide();self.dom.find(".free-popup-wrapper").removeClass("confirmTab");self.registerFreeEvent()})})}else{var t=new Messagebox(self,self.api.dictionary.error_generic,null,null,self.api.dictionary.ok);t.show()}})};self.downloadpaid=function(n){self.startloading();var t="www.";self.api.base.indexOf("localhost")!=-1&&(t="");window.location=self.api.protocol+t+self.api.base+"/checkout?lang="+self.api.language+"&id="+self.logo+"&addons="+n};_lock=!1;self.downloadpaidWS=function(){if(!_lock){_lock=!0;var n={Email:self.dom.find(".paid-popup-wrapper-ws .email-field input").val(),Language:api.language.toLowerCase(),Name:self.companyName,LogoId:self.logo,LogoPngId:self.logo_png_id};$.ajax({type:"post",url:self.api.webself+"proceedtoplan",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"}).always(function(n){n&&n.url?window.location=n.url:_lock=!1})}};self.setActions=function(){var n=200,t=200;if((self.paid_plan=="301"||self.paid_plan=="501")&&self.payment_status!=null){n=5e3;t=5e3;self.dom.find(".vector-buttom").children("span,i").hide();self.dom.find(".vector-buttom").children(".download").show();self.dom.find(".download-vector-box").on("mouseup",function(){self.startdownload(5e3,5e3)});self.dom.find(".highres-buttom").remove();self.dom.find(".free-buttom").remove();self.dom.find(".vector-ws-buttom").remove()}else if(self.paid_plan=="999"&&self.payment_status=="Completed"){n=5e3;t=5e3;self.dom.find(".vector-ws-buttom").find("i").hide();self.dom.find(".vector-ws-buttom").find(".download").show();self.dom.find(".highres-buttom").remove();self.dom.find(".free-buttom").remove();self.dom.find(".vector-buttom").remove();self.dom.find(".vector-ws-buttom").on("mouseup",function(){self.startdownload(5e3,5e3)})}else{self.dom.find(".vector-buttom").find("i").hide();self.dom.find(".vector-buttom").find(".buy").show();self.dom.find(".vector-ws-buttom").find("i").hide();self.dom.find(".vector-ws-buttom").find(".ws-buy").show();var i=self.dom.find(".addons-confirm"),f=self.dom.find(".addon-back"),r=self.dom.find(".addons-wrapper"),e=self.dom.find(".addon-link"),u=self.dom.find(".addon-add-wrapper");self.dom.find(".download-vector-box").on("mouseup",function(){self.calladdonswrapper(r)});u.on("click",function(){var n=$(this).closest(".addon");n.hasClass("active")&&$(this).removeClass("active");n.toggleClass("active");self.updatecontinuebtn(i)});u.on("mouseenter",function(){var n=$(this);n.find(".addon-added").is(":visible")&&n.addClass("active")});e.on("click",function(n){navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0&&(n.preventDefault(),window.open($(this).attr("href"),"_blank"))});i.on("click",function(){var n="";self.dom.find(".addon.active").each(function(){n+=$(this).attr("data-addon")+","});self.dom.find(".addon.active").length>0&&(n=n.slice(0,-1));self.callpaiddownload(n)});f.on("click",function(){self.closeaddonswrapper(r)});self.dom.find(".download-webself-box").on("click",function(){self.downloadhiderrors();self.dom.find(".paid-popup-wrapper-ws .email-field input").val("");self.dom.find(".paid-popup-wrapper-ws").fadeIn(300).addClass("vector");self.dom.find(".paid-popup-wrapper-ws .paid-popup-box").center();self.registerPaidEvent();self.dom.find(".paid-popup-wrapper-ws .close, .paid-popup-wrapper-ws .cancel").on("click",function(){self.dom.find(".paid-popup-wrapper-ws").fadeOut()})});self.dom.find(".download-highres-box").on("mouseup",function(){self.downloadhiderrors();self.dom.find(".paid-popup-wrapper .email-field input").val("");self.dom.find(".paid-popup-wrapper").fadeIn(300).addClass("hires");self.dom.find(".paid-popup-wrapper .paid-popup-box").center();self.registerPaidEvent();self.dom.find(".paid-popup-wrapper .close, .paid-popup-wrapper .cancel").on("click",function(){self.dom.find(".paid-popup-wrapper").fadeOut()})});if(self.dom.find(".free-buttom").find("i").hide(),self.dom.find(".free-buttom").find("span").show(),self.paid_plan=="0")self.dom.find(".download-free-box").on("mouseup",function(){self.startdownload(200,200)});else{self.dom.find(".free-popup-wrapper .close, .free-popup-wrapper .cancel").on("click",function(){self.dom.find(".free-popup-wrapper").fadeOut()});self.registerFreeEvent();self.dom.find(".download-free-box").on("click",function(){self.downloadhiderrors();var n=self.dom.find(".free-popup-wrapper .name-field input"),t=self.dom.find(".free-popup-wrapper .email-field input");$(".at-share-btn").attr("tabindex",0);n.val()==""&&n.addClass("is-empty");t.val()==""&&t.addClass("is-empty");self.dom.find(".free-popup-wrapper").fadeIn(300,function(){self.dom.find(".free-popup-wrapper .name-field input").focus().addClass("is-focused")});self.dom.find(".free-popup-wrapper .free-popup-box").center()})}}self.autodownload&&self.startdownload(n,t)};getQueryVariable("view")==="addons"&&self.calladdonswrapper(self.dom.find(".addons-wrapper"),!1)